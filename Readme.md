# –ö–∞—Å—Å–∏–æ–ø–µ—è - –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∞ –∫–æ—Å–º–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å–±–æ—Ä–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∫–æ—Å–º–∏—á–µ—Å–∫–∏—Ö API (ISS, NASA, SpaceX –∏ –¥—Ä.)

### –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã:
- **rust_iss** - Rust API (Axum + SQLx + Redis) - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- **telemetry_generator** - Rust CLI - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ (–∑–∞–º–µ–Ω–∞ Pascal legacy)
- **php_web** - Laravel —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Å Bootstrap
- **redis** - Redis 7 –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- **db** - PostgreSQL 16 —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
- **nginx** - Reverse proxy

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/teetraise/he-path-of-the-samurai.git
cd he-path-of-the-samurai

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up --build

# 4. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
# Frontend: http://localhost:8080/dashboard
# API: http://localhost:8081/health
```

## üéØ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:

```bash
# 1. Healthcheck API
curl http://localhost:8081/health
# –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç: {"status":"ok","service":"rust-iss","now":"..."}

# 2. –¢–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è ISS (—Å –∫—ç—à–µ–º Redis)
curl http://localhost:8081/last | jq .
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —à–∏—Ä–æ—Ç—É, –¥–æ–ª–≥–æ—Ç—É, —Å–∫–æ—Ä–æ—Å—Ç—å –ú–ö–°

# 3. –¢—Ä–µ–Ω–¥ –¥–≤–∏–∂–µ–Ω–∏—è ISS
curl http://localhost:8081/iss/trend | jq .
# –†–∞—Å—á–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è

# 4. –°–≤–æ–¥–∫–∞ –∫–æ—Å–º–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (NEO, APOD, SpaceX)
curl http://localhost:8081/space/summary | jq .
# –í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ

# 5. –ê—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è (–î–ï–ú–û —Ä–µ–∂–∏–º)
curl "http://localhost:8080/api/astro/events?demo=true" | jq .
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è (–∑–∞—Ç–º–µ–Ω–∏—è, –ø–æ–ª–Ω–æ–ª—É–Ω–∏—è)

# 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è Redis
docker exec iss_redis redis-cli -a redispass --no-auth-warning KEYS "*"
# –í–∏–¥–∏–º –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ISS –∏ OSDR

# 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
docker-compose logs rust_iss --tail=50
# –í–∏–¥–∏–º –ª–æ–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–∞–∂–¥—ã–µ 2 –º–∏–Ω—É—Ç—ã (ISS), 10 –º–∏–Ω—É—Ç (OSDR)

# 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker exec iss_db psql -U cassiopeia_user -d cassiopeia -c "SELECT COUNT(*) FROM iss_fetch_log;"
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π ISS –≤ –ë–î —Ä–∞—Å—Ç–µ—Ç —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º

# 9. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏
docker exec iss_db psql -U cassiopeia_user -d cassiopeia -c "SELECT * FROM telemetry_legacy ORDER BY id DESC LIMIT 3;"
# –í–∏–¥–∏–º –∑–∞–ø–∏—Å–∏ —Å voltage, temp –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
```

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

1. **Dashboard**: http://localhost:8080/dashboard
   - –ö–∞—Ä—Ç–∞ —Å –ø–æ–∑–∏—Ü–∏–µ–π –ú–ö–° –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - –î–∞–Ω–Ω—ã–µ –æ –±–ª–∏–∂–∞–π—à–∏—Ö –∞—Å—Ç–µ—Ä–æ–∏–¥–∞—Ö (NEO)
   - –§–æ—Ç–æ –¥–Ω—è –æ—Ç NASA (APOD)
   - –ó–∞–ø—É—Å–∫–∏ SpaceX
   - CMS –±–ª–æ–∫–∏ –∏–∑ –ë–î

2. **–î–µ–º–æ —Å–æ–±—ã—Ç–∏—è**: http://localhost:8080/dashboard?astro_demo=true
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è

## API Endpoints

### Rust API (port 8081)

```bash
GET /health              # Healthcheck
GET /last                # –ü–æ—Å–ª–µ–¥–Ω—è—è –ø–æ–∑–∏—Ü–∏—è ISS (–∫—ç—à Redis 60 —Å–µ–∫)
GET /fetch               # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è ISS
GET /iss/trend           # –†–∞—Å—á–µ—Ç –¥–≤–∏–∂–µ–Ω–∏—è ISS
GET /osdr/sync           # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è NASA OSDR
GET /osdr/list           # –°–ø–∏—Å–æ–∫ OSDR –¥–∞—Ç–∞—Å–µ—Ç–æ–≤
GET /space/:src/latest   # –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É (apod/neo/spacex)
GET /space/refresh       # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
GET /space/summary       # –°–≤–æ–¥–∫–∞ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
```

### Laravel API (port 8080)

```bash
GET /api/astro/events    # –ê—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
  ?lat=55.7558           # –®–∏—Ä–æ—Ç–∞
  &lon=37.6176           # –î–æ–ª–≥–æ—Ç–∞
  &days=90               # –î–Ω–µ–π –≤–ø–µ—Ä–µ–¥ (–¥–æ 366)
  &body=sun              # –¢–µ–ª–æ (sun/moon)
  &demo=true             # –î–µ–º–æ —Ä–µ–∂–∏–º —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç **Clean Architecture** –ø—Ä–∏–Ω—Ü–∏–ø–∞–º:
- Repository Pattern - –∏–∑–æ–ª—è—Ü–∏—è SQL
- Service Layer - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- Cache-Aside - Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- Rate Limiting - 100 req/min
- PostgreSQL Advisory Lock

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç –º–æ–Ω–æ–ª–∏—Ç–∞

### –î–æ:
- –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π main.rs (545 —Å—Ç—Ä–æ–∫)
- –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –•–∞—Ä–¥–∫–æ–¥ —Å–µ–∫—Ä–µ—Ç–æ–≤
- Pascal legacy 2008

### –ü–æ—Å–ª–µ:
-  –°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (2158 —Å—Ç—Ä–æ–∫, 30 –º–æ–¥—É–ª–µ–π)
-  Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
-  –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ .env
-  Rust CLI generator
-  –ë–î —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
-  Multi-stage builds

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [ARCHITECTURE.md](ARCHITECTURE.md) - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [db/init.sql](db/init.sql) - –°—Ö–µ–º–∞ –ë–î
